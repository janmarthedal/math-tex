<link rel="import" href="../polymer/polymer.html">

<!--
Typesetting math described by TeX, using MathJax.

##### Example

    <math-tex>x^2</math-tex>

@element math-tex
@blurb Element providing solution to ...
@status alpha
@homepage http://github.com/janmarthedal/math-tex/
-->

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<script type="text/javascript">
  MathJax.Hub.Register.StartupHook("Begin Typeset", function () {
    console.log("Begin Typeset");
  });
</script>

<polymer-element name="math-tex" attributes="mode">
  <script>
    Polymer('math-tex', {
      ready: function () {
        var sd = this.createShadowRoot();
        var script = document.createElement('script');
        script.type = "math/tex";
        if (this.mode === 'display') {
          script.type += "; mode=display";
        }
        script.innerHTML = this.textContent;
        sd.appendChild(script);
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, script]);
      }
    });
  </script>
</polymer-element>
